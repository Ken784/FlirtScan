# é€²éšé€å¥åˆ†ææµç¨‹åœ–

## æ›´æ–°æ—¥æœŸ
2025-12-10

---

## ğŸ“Š å®Œæ•´æµç¨‹åœ–

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         HomePage                                 â”‚
â”‚                                                                  â”‚
â”‚  1. ç”¨æˆ¶é¸æ“‡å°è©±æˆªåœ–                                              â”‚
â”‚  2. é»æ“Šã€Œé–‹å§‹åˆ†æã€æŒ‰éˆ•                                          â”‚
â”‚     â”œâ”€ ref.read(analysisProvider).analyze(imageBase64)          â”‚
â”‚     â””â”€ _showAd() // æ’­æ”¾ç¬¬ä¸€æ”¯å»£å‘Š                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Rewarded Ad #1 (å…¨è¢å¹•)                       â”‚
â”‚                                                                  â”‚
â”‚  - ç”¨æˆ¶çœ‹å»£å‘Š                                                     â”‚
â”‚  - èƒŒå¾Œåˆ†æåœ¨é€²è¡Œä¸­                                               â”‚
â”‚  - 5 ç§’å¾Œå¯é—œé–‰                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
                              â†“ onUserEarnedReward
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ResultPage                               â”‚
â”‚                                                                  â”‚
â”‚  ç›£è½ analysisProvider ç‹€æ…‹ï¼š                                     â”‚
â”‚  â”œâ”€ isAnalyzing â†’ é¡¯ç¤ºã€Œæ­£åœ¨è§£è®€...ã€                            â”‚
â”‚  â”œâ”€ hasError â†’ é¡¯ç¤ºéŒ¯èª¤è¨Šæ¯                                       â”‚
â”‚  â””â”€ isCompleted â†’ é¡¯ç¤ºåˆ†æçµæœ                                    â”‚
â”‚                                                                  â”‚
â”‚  åˆ†æçµæœå…§å®¹ï¼š                                                   â”‚
â”‚  â”œâ”€ æ›–æ˜§æŒ‡æ•¸å¡ç‰‡                                                  â”‚
â”‚  â”œâ”€ é›·é”åœ–                                                        â”‚
â”‚  â”œâ”€ èªæ°£æ´å¯Ÿ                                                      â”‚
â”‚  â”œâ”€ ç¸½çµ                                                          â”‚
â”‚  â”œâ”€ [é€²éšé€å¥åˆ†æ] æŒ‰éˆ• â† é»æ“Š                                    â”‚
â”‚  â””â”€ [æˆªåœ–] æŒ‰éˆ•                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
                              â†“ _handleAdvancedAnalysis(result)
                              â†“
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ æª¢æŸ¥è§£é–ç‹€æ…‹       â”‚
                    â”‚ isAdvancedUnlocked â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚                           â”‚
              false                       true
                â”‚                           â”‚
                â†“                           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æœªè§£é– - æ’­æ”¾ç¬¬äºŒæ”¯å»£å‘Š     â”‚   â”‚  å·²è§£é– - ç›´æ¥è·³è½‰           â”‚
â”‚                             â”‚   â”‚                             â”‚
â”‚  1. setState(_isLoadingAd)  â”‚   â”‚  _navigateToAdvancedAnalysisâ”‚
â”‚  2. æª¢æŸ¥å»£å‘Šæ˜¯å¦å·²è¼‰å…¥       â”‚   â”‚  context.push(              â”‚
â”‚  3. è¼‰å…¥å»£å‘Šï¼ˆå¦‚éœ€è¦ï¼‰       â”‚   â”‚    ResultSentencePage.route â”‚
â”‚  4. æ’­æ”¾å»£å‘Š                â”‚   â”‚  )                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚                           â”‚
                â†“                           â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  Rewarded Ad #2 (å…¨è¢å¹•)     â”‚            â”‚
â”‚                             â”‚            â”‚
â”‚  - ç”¨æˆ¶çœ‹å»£å‘Š                â”‚            â”‚
â”‚  - 5 ç§’å¾Œå¯é—œé–‰              â”‚            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
                â”‚                           â”‚
                â†“ onUserEarnedReward        â”‚
                â”‚                           â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  è§£é–é€²éšåˆ†æ                â”‚            â”‚
â”‚                             â”‚            â”‚
â”‚  ref.read(analysisProvider  â”‚            â”‚
â”‚    .notifier)               â”‚            â”‚
â”‚    .unlockAdvancedAnalysis()â”‚            â”‚
â”‚                             â”‚            â”‚
â”‚  _navigateToAdvancedAnalysisâ”‚            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
                â”‚                           â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ResultSentencePage                            â”‚
â”‚                                                                  â”‚
â”‚  è®€å– analysisProvider.resultï¼š                                   â”‚
â”‚  â”œâ”€ result == null â†’ é¡¯ç¤ºéŒ¯èª¤é é¢                                â”‚
â”‚  â””â”€ result != null â†’ é¡¯ç¤ºé€å¥åˆ†æ                                â”‚
â”‚                                                                  â”‚
â”‚  é€å¥åˆ†æå…§å®¹ï¼š                                                   â”‚
â”‚  â”œâ”€ PageHeader('é€å¥åˆ†æ')                                       â”‚
â”‚  â”œâ”€ å°è©±å¡ç‰‡åˆ—è¡¨ (result.sentences)                              â”‚
â”‚  â”‚  â””â”€ QuoteAnalysisCard                                        â”‚
â”‚  â”‚     â”œâ”€ side: speaker == Me ? me : opponent                   â”‚
â”‚  â”‚     â”œâ”€ quote: originalText                                   â”‚
â”‚  â”‚     â”œâ”€ meaning: hiddenMeaning                                â”‚
â”‚  â”‚     â”œâ”€ rating: flirtScore                                    â”‚
â”‚  â”‚     â”œâ”€ ratingPercent: flirtScore * 10                        â”‚
â”‚  â”‚     â””â”€ reason: scoreReason                                   â”‚
â”‚  â”œâ”€ AdvancedSummaryCard(result.advancedSummary)                 â”‚
â”‚  â””â”€ [æˆªåœ–] æŒ‰éˆ•                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
                              â†“ ç”¨æˆ¶è¿”å›
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ResultPage                               â”‚
â”‚                                                                  â”‚
â”‚  ç”¨æˆ¶å†æ¬¡é»æ“Š [é€²éšé€å¥åˆ†æ] æŒ‰éˆ•                                 â”‚
â”‚  â”œâ”€ æª¢æŸ¥ isAdvancedUnlocked                                      â”‚
â”‚  â””â”€ true â†’ ç›´æ¥è·³è½‰ï¼ˆä¸æ’­æ”¾å»£å‘Šï¼‰âœ¨                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”‘ é—œéµæ±ºç­–é»

### 1. è§£é–ç‹€æ…‹æª¢æŸ¥

```dart
if (result.isAdvancedUnlocked) {
  // å·²è§£é– â†’ ç›´æ¥è·³è½‰
  _navigateToAdvancedAnalysis();
  return;
}
// æœªè§£é– â†’ æ’­æ”¾å»£å‘Š
```

**ä½ç½®**ï¼š`ResultPage._handleAdvancedAnalysis`

### 2. å»£å‘Šè¼‰å…¥æª¢æŸ¥

```dart
if (!_adService.isAdLoaded) {
  // é¡¯ç¤ºè¼‰å…¥æç¤º
  // ç­‰å¾…å»£å‘Šè¼‰å…¥
  await _adService.loadRewardedAd();
  
  if (!_adService.isAdLoaded) {
    // è¼‰å…¥å¤±æ•— â†’ é¡¯ç¤ºéŒ¯èª¤è¨Šæ¯
    return;
  }
}
// å»£å‘Šå·²è¼‰å…¥ â†’ æ’­æ”¾å»£å‘Š
```

**ä½ç½®**ï¼š`ResultPage._handleAdvancedAnalysis`

### 3. å»£å‘Šå›èª¿è™•ç†

```dart
await _adService.showRewardedAd(
  onUserEarnedReward: () {
    // ç”¨æˆ¶çœ‹å®Œå»£å‘Š â†’ è§£é–ä¸¦è·³è½‰
    ref.read(analysisProvider.notifier).unlockAdvancedAnalysis();
    if (mounted) {
      _navigateToAdvancedAnalysis();
    }
  },
  onAdDismissed: () {
    // å»£å‘Šé—œé–‰ â†’ æ¢å¾©æŒ‰éˆ•ç‹€æ…‹
    if (mounted) {
      setState(() {
        _isLoadingAd = false;
      });
    }
  },
  onAdFailedToShow: () {
    // å»£å‘Šæ’­æ”¾å¤±æ•— â†’ é¡¯ç¤ºéŒ¯èª¤è¨Šæ¯
    // æ¢å¾©æŒ‰éˆ•ç‹€æ…‹
  },
);
```

**ä½ç½®**ï¼š`ResultPage._handleAdvancedAnalysis`

---

## ğŸ“Š ç‹€æ…‹ç®¡ç†æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      AnalysisProvider                            â”‚
â”‚                                                                  â”‚
â”‚  AnalysisState {                                                 â”‚
â”‚    status: AnalysisStatus                                        â”‚
â”‚    result: AnalysisResult?                                       â”‚
â”‚    errorMessage: String?                                         â”‚
â”‚    imageBase64: String?                                          â”‚
â”‚  }                                                               â”‚
â”‚                                                                  â”‚
â”‚  AnalysisResult {                                                â”‚
â”‚    id: String                                                    â”‚
â”‚    createdAt: DateTime                                           â”‚
â”‚    partnerName: String                                           â”‚
â”‚    emotional: RadarMetric                                        â”‚
â”‚    intimacy: RadarMetric                                         â”‚
â”‚    playfulness: RadarMetric                                      â”‚
â”‚    responsive: RadarMetric                                       â”‚
â”‚    balance: RadarMetric                                          â”‚
â”‚    totalScore: double                                            â”‚
â”‚    relationshipStatus: String                                    â”‚
â”‚    summary: String                                               â”‚
â”‚    toneInsight: String                                           â”‚
â”‚    wittyConclusion: String                                       â”‚
â”‚    sentences: List<SentenceAnalysis> â† é€å¥åˆ†æè³‡æ–™              â”‚
â”‚    advancedSummary: String â† é€²éšç¸½çµ                            â”‚
â”‚    isAdvancedUnlocked: bool â† è§£é–ç‹€æ…‹                           â”‚
â”‚  }                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
                              â†“ ref.watch(analysisProvider)
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      UI Components                               â”‚
â”‚                                                                  â”‚
â”‚  ResultPage                                                      â”‚
â”‚  â”œâ”€ ç›£è½ analysisState.status                                    â”‚
â”‚  â”œâ”€ ç›£è½ analysisState.result                                    â”‚
â”‚  â””â”€ ä½¿ç”¨ result.isAdvancedUnlocked                               â”‚
â”‚                                                                  â”‚
â”‚  ResultSentencePage                                              â”‚
â”‚  â”œâ”€ è®€å– analysisState.result                                    â”‚
â”‚  â”œâ”€ ä½¿ç”¨ result.sentences                                        â”‚
â”‚  â””â”€ ä½¿ç”¨ result.advancedSummary                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†‘
                              â†‘ ref.read(analysisProvider.notifier)
                              â†‘
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      State Updates                               â”‚
â”‚                                                                  â”‚
â”‚  unlockAdvancedAnalysis()                                        â”‚
â”‚  â””â”€ state = state.copyWith(                                      â”‚
â”‚       result: result.copyWith(                                   â”‚
â”‚         isAdvancedUnlocked: true                                 â”‚
â”‚       )                                                          â”‚
â”‚     )                                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¨ UI å…ƒä»¶æ¨¹

```
ResultSentencePage
â”œâ”€ Scaffold
â”‚  â””â”€ Container (æ¼¸å±¤èƒŒæ™¯)
â”‚     â””â”€ SafeArea
â”‚        â””â”€ ListView
â”‚           â”œâ”€ PageHeader('é€å¥åˆ†æ')
â”‚           â”œâ”€ SizedBox(height: 16)
â”‚           â”‚
â”‚           â”œâ”€ QuoteAnalysisCard (sentence 1)
â”‚           â”‚  â”œâ”€ Container (ç™½è‰²å¡ç‰‡)
â”‚           â”‚  â”‚  â”œâ”€ Container (é»ƒè‰²/è—è‰²æ°£æ³¡)
â”‚           â”‚  â”‚  â”‚  â””â”€ Text (åŸå¥)
â”‚           â”‚  â”‚  â”œâ”€ Text ('èƒŒå¾Œå«æ„')
â”‚           â”‚  â”‚  â”œâ”€ Text (å«æ„å…§å®¹)
â”‚           â”‚  â”‚  â”œâ”€ Row
â”‚           â”‚  â”‚  â”‚  â”œâ”€ Text ('æ›–æ˜§æŒ‡æ•¸')
â”‚           â”‚  â”‚  â”‚  â”œâ”€ _Stars (æ˜Ÿç´š)
â”‚           â”‚  â”‚  â”‚  â””â”€ Text (ç™¾åˆ†æ¯”)
â”‚           â”‚  â”‚  â””â”€ Text (è©•åˆ†ç†ç”±)
â”‚           â”‚
â”‚           â”œâ”€ SizedBox(height: 16)
â”‚           â”œâ”€ QuoteAnalysisCard (sentence 2)
â”‚           â”œâ”€ SizedBox(height: 16)
â”‚           â”œâ”€ QuoteAnalysisCard (sentence 3)
â”‚           â”‚  ...
â”‚           â”‚
â”‚           â”œâ”€ SizedBox(height: 24)
â”‚           â”‚
â”‚           â”œâ”€ AdvancedSummaryCard
â”‚           â”‚  â””â”€ Container (è—è‰²é‚Šæ¡†)
â”‚           â”‚     â”œâ”€ Text ('âœ¨ ç¸½çµ')
â”‚           â”‚     â””â”€ Text (ç¸½çµå…§å®¹)
â”‚           â”‚
â”‚           â”œâ”€ SizedBox(height: 24)
â”‚           â”‚
â”‚           â””â”€ AppButton ('æˆªåœ–')
```

---

## ğŸ”„ è³‡æ–™æµå‘

```
Firebase Functions
       â†“
   (åˆ†æå®Œæˆ)
       â†“
AnalysisService.analyzeConversation()
       â†“
   è¿”å› JSON
       â†“
AnalysisResult.fromJson()
       â†“
   å»ºç«‹ç‰©ä»¶
   â”œâ”€ sentences: List<SentenceAnalysis>
   â”œâ”€ advancedSummary: String
   â””â”€ isAdvancedUnlocked: false (é è¨­)
       â†“
AnalysisProvider.state
       â†“
   (å„²å­˜åœ¨è¨˜æ†¶é«”)
       â†“
ResultPage è®€å–
   â”œâ”€ é¡¯ç¤ºåˆæ­¥åˆ†æ
   â””â”€ æä¾›ã€Œé€²éšé€å¥åˆ†æã€æŒ‰éˆ•
       â†“
   (ç”¨æˆ¶é»æ“Š)
       â†“
   æ’­æ”¾å»£å‘Š
       â†“
   (çœ‹å®Œå»£å‘Š)
       â†“
unlockAdvancedAnalysis()
   â”œâ”€ result.copyWith(isAdvancedUnlocked: true)
   â””â”€ æ›´æ–° state
       â†“
ResultSentencePage è®€å–
   â”œâ”€ é¡¯ç¤º sentences
   â””â”€ é¡¯ç¤º advancedSummary
       â†“
   (ç”¨æˆ¶è¿”å›)
       â†“
ResultPage å†æ¬¡è®€å–
   â””â”€ isAdvancedUnlocked == true
       â†“
   (ç”¨æˆ¶å†æ¬¡é»æ“Š)
       â†“
   ç›´æ¥è·³è½‰ï¼ˆä¸æ’­æ”¾å»£å‘Šï¼‰âœ¨
```

---

## ğŸ“ é‡è¦æ³¨æ„äº‹é …

### 1. è§£é–ç‹€æ…‹çš„ç”Ÿå‘½é€±æœŸ

```
App å•Ÿå‹•
  â†“
ç”¨æˆ¶å®Œæˆåˆ†æ
  â†“
isAdvancedUnlocked = false (é è¨­)
  â†“
ç”¨æˆ¶çœ‹å®Œå»£å‘Š
  â†“
isAdvancedUnlocked = true
  â†“
ç”¨æˆ¶å¯é‡è¤‡è§€çœ‹ï¼ˆä¸éœ€å†çœ‹å»£å‘Šï¼‰
  â†“
App é‡å•Ÿ æˆ– æ¸…é™¤ç‹€æ…‹
  â†“
isAdvancedUnlocked = false (é‡ç½®)
```

**æ³¨æ„**ï¼šç›®å‰è§£é–ç‹€æ…‹åªå„²å­˜åœ¨è¨˜æ†¶é«”ä¸­ï¼ŒApp é‡å•Ÿå¾Œæœƒéºå¤±ã€‚

### 2. å»£å‘Šè¼‰å…¥æ™‚æ©Ÿ

```
HomePage åˆå§‹åŒ–
  â†“
AdService.loadRewardedAd() (é è¼‰ç¬¬ä¸€æ”¯å»£å‘Š)
  â†“
ç”¨æˆ¶é»æ“Šã€Œé–‹å§‹åˆ†æã€
  â†“
æ’­æ”¾ç¬¬ä¸€æ”¯å»£å‘Š
  â†“
å»£å‘Šé—œé–‰å¾Œè‡ªå‹•é è¼‰ä¸‹ä¸€æ”¯å»£å‘Š
  â†“
ç”¨æˆ¶é»æ“Šã€Œé€²éšé€å¥åˆ†æã€
  â†“
æª¢æŸ¥å»£å‘Šæ˜¯å¦å·²è¼‰å…¥
  â”œâ”€ å·²è¼‰å…¥ â†’ ç›´æ¥æ’­æ”¾
  â””â”€ æœªè¼‰å…¥ â†’ ç­‰å¾…è¼‰å…¥
```

### 3. éŒ¯èª¤è™•ç†æµç¨‹

```
ç”¨æˆ¶é»æ“Šã€Œé€²éšé€å¥åˆ†æã€
  â†“
æª¢æŸ¥å»£å‘Šè¼‰å…¥ç‹€æ…‹
  â”œâ”€ è¼‰å…¥å¤±æ•— â†’ é¡¯ç¤ºã€Œå»£å‘Šè¼‰å…¥å¤±æ•—ã€
  â”œâ”€ æ’­æ”¾å¤±æ•— â†’ é¡¯ç¤ºã€Œå»£å‘Šæ’­æ”¾å¤±æ•—ã€
  â””â”€ æˆåŠŸ â†’ è·³è½‰åˆ°é€å¥åˆ†æé é¢
      â†“
  æª¢æŸ¥åˆ†æçµæœ
      â”œâ”€ result == null â†’ é¡¯ç¤ºã€Œæ²’æœ‰åˆ†æçµæœã€
      â””â”€ result != null â†’ é¡¯ç¤ºé€å¥åˆ†æ
```

---

## ğŸ¯ ç¸½çµ

é€™å€‹æµç¨‹åœ–å±•ç¤ºäº†é€²éšé€å¥åˆ†æåŠŸèƒ½çš„å®Œæ•´æµç¨‹ï¼ŒåŒ…æ‹¬ï¼š

1. **ç”¨æˆ¶æµç¨‹**ï¼šå¾ä¸Šå‚³æˆªåœ–åˆ°æŸ¥çœ‹é€å¥åˆ†æ
2. **æŠ€è¡“æµç¨‹**ï¼šç‹€æ…‹ç®¡ç†ã€å»£å‘Šæ’­æ”¾ã€è³‡æ–™é¡¯ç¤º
3. **éŒ¯èª¤è™•ç†**ï¼šå„ç¨®ç•°å¸¸æƒ…æ³çš„è™•ç†
4. **è§£é–æ©Ÿåˆ¶**ï¼šé¦–æ¬¡éœ€è¦çœ‹å»£å‘Šï¼Œä¹‹å¾Œå¯é‡è¤‡è§€çœ‹

æ‰€æœ‰æµç¨‹éƒ½å·²å®Œæ•´å¯¦ä½œä¸¦é€šé linter æª¢æŸ¥ã€‚

---

**æœ€å¾Œæ›´æ–°**ï¼š2025-12-10  
**ç‰ˆæœ¬**ï¼š1.0.0




